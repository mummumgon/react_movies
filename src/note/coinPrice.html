import {useState , useEffect } from 'react';
function App() {
  const [loding , setLoding] = useState(true);
  const [coins , setcoins] = useState([]);
  const [price , setprice] = useState(null);
  const [inp , setinp] = useState('');
  useEffect(() => {
    fetch('https://api.coinpaprika.com/v1/tickers').then((response) => response.json()).then((json)=> {
      setcoins(json); 
      setLoding(false);
    });
    console.log('코인들:',coins);
  }, []);
  const onChainp = (e) => {setprice(Number(e.target.value))};
  const onChange = (e) => {setinp( Number(e.target.value))};
  console.log("price",price,'///inp',inp);
  return <div>
   <h1>THE COINS!!(${coins.length})</h1>
   <form>
   <input onChange={onChainp} type="number" placeholder='가격을 적어주세요'/>
   {loding ? "Loading..." :  
    <select onChange={onChange}>
      <option>선택하세요</option>
        {coins.map((coin)=>
        <option key={coin.id} value={coin.quotes.USD.price}>RANK({coin.rank}).{coin.name}({coin.symbol}) : ${(coin.quotes.USD.price).toFixed(3)}</option>
        )}
    </select>
   } 
   </form>
   <p>적으신 금액: {price}원 / 구매하려는 코인:{inp} / {
    
    (price === "" || inp === "") ? 0 : (price/inp).toFixed(3)
    
   }개 구매 가능합니다.</p>
  </div>
}

export default App;
